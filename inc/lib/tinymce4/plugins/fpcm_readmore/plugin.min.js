tinymce.PluginManager.add('fpcm_readmore', function(editor, url) {
    editor.addButton('fpcm_readmore', {
        icon: "pagebreak",
        tooltip: "readmore block",
        onclick: function() {
            editor.windowManager.open({
                title: "<readmore> block",
                width: 500,
                height: 250,
                body: [
                    {
                        type: 'container',
                        html: '<textarea style="width:100%;height:200px;resize:none;" id="fpcm-ui-readmoretext-tinymce" tabindex="1"></textarea>'
                    }
                ],               
                onsubmit: function() {
                    var text = jQuery('#fpcm-ui-readmoretext-tinymce').val();
                    if (!text) return;                    
                    editor.insertContent('<readmore>' + text + '</readmore>');
                }
            });
        }
    });
});